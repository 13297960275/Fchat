(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["fonlineconsultation"]=e(require("vue")):t["fonlineconsultation"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({8875:function(t,e,n){var o,i,s;(function(n,r){i=[],o=r,s="function"===typeof o?o.apply(e,i):o,void 0===s||(t.exports=s)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(g){var n,o,i,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,r=/@([^@]*):(\d+):(\d+)\s*$/gi,a=s.exec(g.stack)||r.exec(g.stack),c=a&&a[1]||!1,l=a&&a[2]||!1,d=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");c===d&&(n=document.documentElement.outerHTML,o=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=n.replace(o,"$1").trim());for(var p=0;p<u.length;p++){if("interactive"===u[p].readyState)return u[p];if(u[p].src===c)return u[p];if(c===d&&u[p].innerHTML&&u[p].innerHTML.trim()===i)return u[p]}return null}}return t}))},"8bbf":function(e,n){e.exports=t},fb15:function(t,e,n){"use strict";if(n.r(e),"undefined"!==typeof window){var o=window.document.currentScript,i=n("8875");o=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var s=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(n.p=s[1])}var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({staticClass:"fonlineconsultation-outer-div",attrs:{id:"fonlineconsultation"}},"div",t.Height,!1),[t._t("header",[n("div",{ref:"onlineHeader",staticClass:"online-header-all",attrs:{id:"onlineHeader"}},[n("div",{staticClass:"online-header-all-left"},[t._t("hLeft")],2),n("div",{staticClass:"online-header-all-center"},[t._t("hCenter",[t._v(t._s(t.username))])],2),n("div",{staticClass:"online-header-all-right"},[t._t("hRight")],2)])],{id:"onlineHeader"}),n("div",t._b({ref:"onlineContentAll",staticClass:"online-content-all"},"div",t.contentProp,!1),[t._t("popList",t._l(t.MessageArray,(function(e,o){return n("pops",{key:o,attrs:{leftSrc:t.popLeftAva,rightSrc:t.popRightAva,bg:t.popBg,size:t.popSize,content:e["content"],type:e["type"],pos:e["pos"],duration:e["duration"]||"未知"},scopedSlots:t._u([{key:"message",fn:function(){return[t._t("message",null,{Item:e})]},proxy:!0},{key:"image",fn:function(){return[t._t("image",null,{Item:e})]},proxy:!0},{key:"audio",fn:function(){return[t._t("audio",null,{Item:e})]},proxy:!0},{key:"video",fn:function(){return[t._t("video",null,{Item:e})]},proxy:!0}],null,!0)})})),{List:t.MessageArray})],2),n("div",{ref:"onlineInput",staticClass:"online-input-content",attrs:{id:"onlineInput"}},[n("div",{staticClass:"online-input-content-lefticon"},[t._t("leftIcon",[t.isVoice?t._e():n("span",{class:t.leftIcon,style:{fontSize:t.leftIconSize+"px",color:t.leftIconColor},on:{click:t.leftHandlerClick}}),t.isVoice?n("span",{class:t.leftIconChange,style:{fontSize:t.leftIconSize+"px",color:t.leftIconColor},on:{click:t.leftHandlerClick}}):t._e()])],2),n("div",{staticClass:"online-input-content-centerInput"},[t._t("centerText",[t.isVoice?t._e():n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.messageString,expression:"messageString"}],ref:"msgInput",attrs:{id:"msgInput",cols:"24",rows:t.controlRows},domProps:{value:t.messageString},on:{blur:function(e){return t.controlHeight("blur")},focus:function(e){return t.controlHeight("focus")},input:[function(e){e.target.composing||(t.messageString=e.target.value)},t.controlRow]}}),t.isVoice?n("div",{staticClass:"online-input-content-centerInput-voice",style:{height:0==t.isIOS?"0":"",marginBottom:1==t.isIOS?"0":"",marginTop:(t.isIOS,"")}},[n("button",{style:{padding:(t.isIOS,"5px")},on:{touchstart:t.startVoice,touchmove:t.moveVoice,touchend:t.endVoice}},[t._v(t._s(t.voiceMsg))])]):t._e()])],2),n("div",{staticClass:"online-input-content-righticon"},[t._t("rightIcon",[n("span",{class:t.rightIconLeft,style:{fontSize:t.rightIconSize+"px",color:t.rightIconColor},on:{click:t.rightHandlerClick}}),n("span",{class:t.rightIconRight,style:{right:"",fontSize:t.rightIconSize+"px",color:t.rightIconColor},on:{click:t.messageHandler}})])],2)]),t._t("loading",[n("div",{staticClass:"MessageLoading",style:{display:"none",height:t.loadingHeight},attrs:{id:"messageLoading"}},[n("div",[n("svg",{staticClass:"MessageLoading-Img",attrs:{width:"50",height:"50",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[n("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),n("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[n("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])])])]),n("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"sendImg"}}),t.startVoiceBoolean?n("div",{staticClass:"voice-pop"},["正在录音...."==t.voiceContent?n("img",{attrs:{src:"https://p.pstatp.com/origin/13790000036267af24495",alt:"",width:"50px"}}):t._e(),"正在录音...."!=t.voiceContent?n("img",{attrs:{src:"https://p.pstatp.com/origin/ff92000312944dc6f369",width:"50px",alt:""}}):t._e(),n("div",{staticClass:"voice-pop-contant"},[t._v(t._s(t.voiceContent))])]):t._e(),t.voiceStartLoading?n("div",{staticClass:"voice-pop"},[n("svg",{staticClass:"MessageLoading-Img",attrs:{width:"50",height:"50",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[n("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),n("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[n("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])]),t._m(0)]):t._e()],2)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"voice-pop-contant"},[n("br"),t._v("Loading")])}],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"content-pops-all"},["left"===t.pos?n("div",{staticClass:"content-avatar"},[n("img",{attrs:{src:t.leftSrc,width:"40px",height:"40px",alt:""}})]):t._e(),"message"===t.type?n("div",{class:t.className},[t._t("message",[n("div",t._b({class:"content-pops-"+t.pos+"-content"},"div",t.PopProp,!1),[n("pre",{domProps:{innerHTML:t._s(t.content)}})])])],2):t._e(),"image"===t.type?n("div",{class:t.className},[t._t("image",[n("div",t._b({class:"content-pops-"+t.pos+"-content"},"div",t.PopProp,!1),[n("div",{staticStyle:{"text-align":"center"}},[t.imgLoadingComplete?t._e():n("div",{staticClass:"content-pops-all-img-loading"},[n("svg",{attrs:{width:"50",height:"50",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[n("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),n("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[n("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])])]),n("img",{style:{marginTop:"0px",display:1==t.imgLoadingComplete?"block":"none"},attrs:{src:t.content,alt:"loading",width:"100%"},on:{load:function(e){return t.imgLoad(t.content)}}})])])])],2):t._e(),"audio"===t.type?n("div",{class:t.className},[t._t("audio",[n("div",t._b({class:"content-pops-"+t.pos+"-content"},"div",t.PopProp,!1),[n("div",[n("div",{class:"content-pops-"+t.pos+"-content-audio",on:{click:function(e){return t.play(t.content,t.duration)}}},["right"==t.pos?n("span",[t._v(t._s("number"==typeof t.duration?t.duration+'"':t.duration)+" ")]):t._e(),n("span",{class:"left"==t.pos?"FiconFont  icon-iconyuyin":"FiconFont  icon-yuyin"}),"left"==t.pos?n("span",[t._v(" "+t._s("number"==typeof t.duration?t.duration+'"':t.duration))]):t._e()])])])])],2):t._e(),"video"===t.type?n("div",{class:t.className},[t._t("video",[n("div",t._b({class:"content-pops-"+t.pos+"-content"},"div",t.PopProp,!1),[n("div",[n("video",{staticClass:"videoBox",attrs:{id:"PopsVideo",width:"100%",src:t.content,preload:"",controls:"","webkit-playsinline":"true",playsinline:"true","x-webkit-airplay":"allow","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portraint"}})])])])],2):t._e(),"right"===t.pos?n("div",{staticClass:"content-avatar"},[n("img",{attrs:{src:t.rightSrc,width:"40px",height:"40px",alt:""}})]):t._e()])])},l=[],d=n("8bbf"),u=n.n(d);class p{constructor(t){this.message=t,this.loadingState=!1,this.maxSize=2,this.onlyImg=!1,this.ToastDiv=null,this.voiceState=!1,this.audioObj="",this.ToastTop=""}openVoice(t,e){const n=this;if(u.a.prototype.$RecordApp){if(t&&(window.PageSet_RecordAppWxApi=t),setTimeout((function(){n.createToast("正在加载音频插件，请稍等")}),0),!e)return;u.a.prototype.$RecordApp.RequestPermission((function(){n.createToast("音频授权成功。")}),(function(t,e){n.createToast(e?"授权出现问题":"音频出现故障，原因是："+t),n.voiceState=!0}))}}setConfig(t,e,n){if(n)for(var o in n)this[o]&&(this[o]=n[o]);else{if(null===this[t]&&void 0===this[t])throw Error("参数错误");this[t]=e}}loading(t,e,n=!1){let o=document.getElementById("msgInput"),i=document.getElementById(e||"messageLoading");i.style.display="block",this.loadingState=!0,o&&n&&(o.disabled=!0),setTimeout(()=>(i.style.display="none",this.loadingState=!1,o&&(o.disabled=!1),new Promise((t,e)=>{t("请求超时")})),t||5e3)}getLoading(){return this.loadingState}cancelLoading(t){let e=document.getElementById(t||"messageLoading");e.style.display="none",this.loadingState=!1;let n=document.getElementById("msgInput");n&&n.disabled&&(n.disabled=!1)}scrollMessage(){let t=document.querySelector(".online-content-all");if(t){let e=t.scrollHeight;t.scrollTo({top:e,behavior:"smooth"})}}delMessage(){let t=document.getElementById("msgInput");t.rows=1,t.value="",t.dispatchEvent(new Event("input"))}setMessageList(t,e){if(this.message.length=0,e)e.call(this,t);else{if(0==t.length)return;t.forEach(t=>this.message.push(t))}}getMessage(){return this.message}addMessage(t,e){var n={},o=/((http|https|ftp)(:\/\/)([a-z]|[0-9]|[\.]|[:])+)/gi,i=t.match(o);return i&&(t=t.replace(o,`<a href=${i[0]}>${i[0]}</a>`)),n["content"]=t,n["type"]="message",n["pos"]=e||"right",n}addImage(t){return new Promise((e,n)=>{var o={},i=document.getElementById("sendImg");i.value="",i.click(),i.onchange=i=>{var s,r=i.target.files;if(r&&0!=r.length){s=r[0];var{type:a,size:c}=s;console.log(a,s,c),c=(c/1024).toFixed(2)/1e3;var l=new FileReader;l.readAsDataURL(s),l.onload=function(i){const s=this.result;o["content"]=s,-1!=a.indexOf("image")&&(o["type"]="image",c>this.maxSize&&n("上传图片过大")),-1==a.indexOf("video")||this.onlyImg||(o["type"]="video"),-1==a.indexOf("image")&&-1==a.indexOf("video")&&n("请传入正确类型"),o["pos"]=t||"right",e(o)}}}})}sendMessage(t){this.message.push(t),setTimeout(()=>{this.scrollMessage(),setTimeout(()=>{"audio"!=t["type"]&&"video"!=t["type"]&&"image"!=t["type"]&&this.delMessage()},0)},0)}sendVoice(t,e,n){var o={};return o["content"]=t,o["type"]="audio",o["pos"]=n||"right",o["duration"]=e,o}playVoice(t,e){if(""==this.audioObj){var n=document.createElement("audio");n.src=t,document.body.appendChild(n),this.audioObj=n}else this.audioObj.src=t;this.audioObj.play(),this.createToast("正在播放音频 ...",1e3*e)}startVoice(){return new Promise((function(t,e){u.a.prototype.$RecordApp.Start({type:"mp3",sampleRate:16e3,bitRate:16,onProcess:function(t,e,n,o,i,s){console.log(t,e,n,o,i,s)}},(function(){t(),console.log("开始录音 ....")}),(function(t){e("开始录音失败："+t),console.log("开始录音失败："+t)}))}))}pauseVoice(){let t=this;return new Promise((function(e,n){u.a.prototype.$RecordApp.Stop((function(n,o){console.log(n,(window.URL||window.webkitURL).createObjectURL(n),"时长:"+o+"ms");let i=(window.URL||window.webkitURL).createObjectURL(n);o&&(o=Math.ceil(o/1e3));var s=t.sendVoice(i,o);e(s)}),(function(t){console.log("录音失败:"+t),n("录音失败:"+t)}))}))}createToast(t,e){var n=this;if(this.ToastDiv)this.ToastDiv.style.height="30px",this.ToastDiv.innerHTML=t;else{var o=document.createElement("div");o.id="FChatToast",o.style.cssText=`\n            width:100%;\n            line-height:30px;\n            background:rgba(0,0,0,.5);\n            position:fixed;\n            left:0;\n            font-size:16px;\n            text-indent:10px;\n            color:#fff; \n            transition:.5s linear all;\n            z-index:10;\n            overflow:hidden;\n            height:0px;\n            top:${this.ToastTop||document.getElementById("onlineHeader").clientHeight||40}px;\n         `,o.innerHTML=t,document.body.appendChild(o),this.ToastDiv=o,setTimeout((function(){n.ToastDiv.style.height="30px"}),100)}setTimeout((function(){n.ToastDiv.style.height="0px"}),e||3e3)}}var g=new p([]),h={name:"pops",props:{pos:{type:String,default:"right"},size:{type:Number,default:15},bg:{type:String,default:"#6AEA9E"},leftSrc:{type:String,default:"https://p.pstatp.com/origin/137460000bd26a8a1928a"},rightSrc:{type:String,default:"https://p.pstatp.com/origin/1379d00013a79df92cd7a"},type:{type:String,default:"message",validator:t=>{let e=["message","image","video","audio"].filter(e=>e==t?e:"");if(!e.join(""))throw new Error("请传入正确类型");return e.join("")}},content:{type:String},duration:{}},data(){return{imgLoadingComplete:!1}},methods:{imgLoad(){this.imgLoadingComplete=!0,setTimeout(()=>{g.scrollMessage()},0)},play(t,e){g.playVoice(t,e)}},computed:{PopProp(){let{size:t,bg:e}=this,n={fontSize:t+"px"};return e&&"#6AEA9E"!==e&&(n["background"]=e),{style:n}},className(){let{pos:t}=this;return"content-pops-"+t}},mounted(){this.$nextTick(()=>{let t=document.getElementById("PopsVideo");t&&t.addEventListener("canplaythrough",(function(){console.log("视频加载完毕"),g.scrollMessage()}))})}},f=h;function m(t,e,n,o,i,s,r,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),r?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}var v=m(f,c,l,!1,null,null,null),y=v.exports,w={data(){return{messageString:"",controlFocus:!0,loadingHeight:0}},props:{username:{type:String,default:"暂无联系人"},contentHeight:{type:Number},contentBg:{type:String,default:"#F5F5F5"},preventId:{default:"fonlineconsultation"},leftIcon:{type:String,default:"FiconFont icon-volume"},leftIconChange:{type:String,default:"FiconFont icon-fillin"},rightIconLeft:{type:String,default:"FiconFont icon-picture"},rightIconRight:{type:String,default:"FiconFont icon-send"},leftIconSize:{type:Number,default:23},rightIconSize:{type:Number,default:23},leftIconColor:{type:String,default:"#000"},rightIconColor:{type:String,default:"#000"},popBg:{type:String},popSize:{type:Number},popLeftAva:{type:String},popRightAva:{type:String}},computed:{contentProp(){let{contentHeight:t,authorHeight:e,contentBg:n}=this,o={};return o["style"]="height:"+(t||window.innerHeight-e)+"px;background:"+n||!1,o}},methods:{changContentHeight(t){new Promise(e=>{this.$refs.onlineContentAll.style.height=this.contentHeight||t-((this.$refs.onlineHeader.offsetHeight||0)+(this.$refs.onlineInput.offsetHeight||0))+"px",this.loadingHeight=t+"px",e()}).then(()=>{this.scrollAll()}).catch(t=>{throw new Error(t)})},scrollAll(){window.scrollTo(0,0),g.scrollMessage()},controlHeight(t){"blur"===t&&(this.controlScroll(document.body,!0),this.controlFocus=!0),this.controlFocus&&(setTimeout(()=>{this.changContentHeight(window.innerHeight),this.innerHeight=window.innerHeight},450),"focus"===t&&(this.controlScroll(document.body,!1),this.controlFocus=!1))},initInput(){this.messageString="",this.controlRows=1},scroll(t){t.preventDefault()},controlScroll(t,e){e?t.removeEventListener("touchmove",this.scroll):t.addEventListener("touchmove",this.scroll,{passive:!1})},controlRow(){let t=this.$refs.msgInput,e=/[\u4e00-\u9fa5]/,n=t.value.split(""),o=0,i=t.cols;n.forEach(t=>{e.test(t)?o+=2:o+=1,t.indexOf("\n")}),this.controlRows<3&&0!=o&&(this.controlRows=Math.ceil(o/i)),this.controlRows>=3&&o&&(this.controlRows=Math.ceil(o/i)>3?3:Math.ceil(o/i)),0==o&&(this.controlRows=1)},leftHandlerClick(){this.$RecordApp?this.isVoice=!this.isVoice:g.createToast("您未开启音频加载，无法使用音频")},rightHandlerClick(){this.$emit("sendImg",g.addImage())},messageHandler(){let t=document.getElementById("msgInput");t&&(g.getLoading()||this.$emit("send",g.addMessage(t.value)))},startVoice(t){var e=this;clearTimeout(this.touchTimer),document.getElementById(this.preventId).className="fonlineconsultation-outer-div noSelect",e.controlScroll(document.body,!1),this.isCancel=!1,this.touchTimer=0,e.voiceStartLoading=!0,this.touchTimer=setTimeout((function(){g.startVoice().then((function(){e.voiceStartLoading=!1,e.voiceContent="正在录音....",e.voiceMsg="松开结束",e.startVoiceBoolean=!0})).catch((function(t){g.createToast(t),e.endInit()}))}),300),this.voiceStartX=t["touches"]["0"]["pageX"],this.voiceStartY=t["touches"]["0"]["pageY"]},moveVoice(t){clearTimeout(this.touchTimer);var e=t["touches"]["0"]["pageX"],n=t["touches"]["0"]["pageY"],o=e-this.voiceStartX,i=n-this.voiceStartY;function s(t,e){0!=this.touchTimer&&(this.voiceContent=t,this.isCancel=e)}Math.abs(i)>Math.abs(o)+50&&i<0?s.call(this,"上滑取消录音",!0):s.call(this,"正在录音....",!1)},endInit(){var t=this;clearTimeout(this.touchTimer),setTimeout((function(){t.startVoiceBoolean=!1,t.voiceMsg="开始录音",t.controlScroll(document.body,!0),document.getElementById(t.preventId).className="fonlineconsultation-outer-div",t.touchTimer=0,t.voiceStartLoading=!1}),0)},endVoice(){var t=this;t.endInit(),t.isCancel?(t.$RecordApp.Stop(),console.log("取消录音")):(g.loading(),setTimeout((function(){g.pauseVoice().then((function(e){t.endInit(),g.cancelLoading(),t.$emit("sendVoice",e)})).catch((function(e){g.cancelLoading(),g.createToast(e),t.endInit()}))}),500))}},mounted(){this.$nextTick(()=>{this.authorHeight=(this.$refs.onlineHeader.offsetHeight||0)+(this.$refs.onlineInput.offsetHeight||0),this.loadingHeight=window.innerHeight+"px"}),window.addEventListener("keydown",t=>{let{keyCode:e}=t;13===e&&(t.preventDefault(),this.messageHandler())}),window.addEventListener("resize",()=>{this.changContentHeight(window.innerHeight)})},watch:{controlRows(t){setTimeout(()=>{this.changContentHeight(this.innerHeight)},0)}}};const S={pops:y};var _={name:"FonlineConsultation",mixins:[w],components:S,props:{height:{default:window.innerHeight}},data(){return{MessageArrays:g.getMessage(),authorHeight:0,loading:!0,controlRows:1,innerHeight:0,isVoice:!1,voiceMsg:"按住说话",touchTimer:null,voiceContent:"正在录音....",voiceStartX:0,voiceStartY:0,isCancel:!1,startVoiceBoolean:!1,voiceStartLoading:!1}},computed:{Height(){let{fheight:t,headerHeight:e}=this;return{}},MessageArray(){return this.MessageArrays},isIOS(){return-1!=navigator.userAgent.indexOf("iPhone")}},created(){}},x=_,b=m(x,r,a,!1,null,null,null),C=b.exports;y.install=function(t){t.component(y.name,y)},C.install=function(t){t.component(C.name,C)};const I=[C,y],T=function(t){T.installted||(I.map(e=>t.component(e.name,e)),t.prototype.$FChat=g)};"undefined"!==typeof window&&window.Vue&&T(window.Vue);var H={install:T,fonlineconsultation:C,pops:y,FChat:g};e["default"]=H}})}));
//# sourceMappingURL=fonlineconsultation.umd.min.js.map